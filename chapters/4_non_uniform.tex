As a result of the survey presented in chapter~\ref{chapter:literature_review},
we realized that most solutions treat files
separately, leaving it to the end-user to work out how they are related,
an observation shared by other authors~\cite{Silva2016}.
These files may have not yet been ingested into a database system and 
the schema may be unfamiliar and not adequately documented, or even be
composed of multiple files with heterogeneous schemes~\cite{alawini2016,zhang2015astronomy}.
Indeed, it seems that Idreo's classification misses a category for this problem.
We can name this category \emph{Schema Homogenization}, which would belong to the \emph{Middleware} layer.

\todo{Add this category to Idreo's classification, with a brief survey here? i.e.}

\resizebox{\textwidth}{!}{%
\begin{tabular}{l l l}
\hline
\multicolumn{3}{l}{\textbf{Middleware}} \\
\hline
\textit{Schema Homogenization} & Inclusion \cite{DeMarchi2002,DeMarchi2003zigzag,koeller2002integration} & Complementarity \cite{alawini2016} \\
\hline
\end{tabular}}

In \emph{Data Mining in Astronomical Databases}, Borne
describes how data exploration of this kind of diverse datasets is, however,
relevant since it can drive to serendipitous discoveries~\cite{Borne2001}. He proposes
two groups of data mining in this respect:

\paragraph{Event based}

\begin{description}[leftmargin=1cm, labelindent=0.5cm]
  \item[Known events / known algorithms]
    Use physical models to locate known phenomena of interest spatially
    or temporally within a large database
  \item[Known events / unknown algorithms]
    Use pattern recognition and clustering to discover new relationships between known
    phenomena.
  \item[Unknown events / known algorithms]
    Use predictive models to predict the presence of unseen events within a
    large and complex database.
  \item[Unknown events / unknown algorithms]
    Use thresholds to identify transifent or unique events.
\end{description}

\paragraph{Relationship based}

\begin{description}[leftmargin=1cm, labelindent=0.5cm]
    \item[Spatial]
        Identify objects in the same location.
    \item[Temporal]
        Identify events occurring within the same time period.
    \item[Coincidence]
        In general, apply clustering techniques to
        identify objects that are co-located within a multidimensional space.
\end{description}

Borne then enumerates a list of science requirements for data mining:

\begin{description}[leftmargin=1cm, labelindent=0.5cm]
    \item[Object Cross-Identification] between catalogs. Similar to the natural join
        in relational algebra, but based on spatial or multidimensional co-location.
    \item[Object Cross-Correlation] comparing sets of attributes over the full set of objects.
        For instance, identify remote galaxies as those that are \emph{not} present on the ultraviolet spectrum.
    \item[Nearest-neighbor identification] or, in general, application of clustering algorithms in multidimensional spaces.
    \item[Systematic Data Exploration] via event- and relationship-based queries to a database
        hoping to make serendipitous discoveries.
\end{description}

\section{Examining real use cases}

To get a better idea of what kind of explorations astronomers do,
we looked for
concrete examples of queries mentioning \emph{astronomy} on the 242 articles classified on
the systematic literature mapping from chapter~\ref{chapter:literature_review}.

It is soon evident that the datasets published by \gls{SDSS}~\cite{SDSS14} are popular as test
sets since they are readily available and well documented~\cite{Gray2002}.
Furthermore, there are sample queries available~\cite{SDSSSamples}, and real ones can also be
obtained~\cite{SDSSSqlLogs}. Listing~\ref{sql:get_queries} shows an example of how to obtain a list
of queries performed by users.

\begin{listing}[htbp]
\begin{minted}[linenos]{sql}
    SELECT clientIP, seq, statement, elapsed
    FROM SQLlog
    WHERE yy=2018 AND mm>=10 AND rows>0 AND dbname LIKE 'BestDR14%'
\end{minted}
\caption[Obtaining a list of queries performed by \gls{SDSS} users]{
    Example of how to obtain a list of queries performed by users during the end of 2018 over the 14th data release
}\label{sql:get_queries}
\end{listing}

In total, 25 articles -- a $10.3\%$ -- use \gls{SDSS} as a test dataset.
Table~\ref{tab:sdss_queries_count} classifies these 25 articles following the same schema as described
in section~\ref{sec:mapping_category}.

\begin{table}[htbp]
  \begin{center}
    \begin{tabular}{l r r r}
      \textbf{Category} & \textbf{Total} & \textbf{SDSS} & \textbf{\%} \\ \hline
      Exploration Interfaces & 34 & 3 & $8.8\%$ \\
      Indexes & 58 & 5 & $8.6\%$ \\
      Storage & 39 & 11 & $28.3\%$ \\
      Data Visualization & 36 & 2 & $5.6\%$ \\
      Interactive Performance Optimizations & 48 & 4 & $8.3\%$ \\
    \end{tabular}
  \end{center}
  \caption{Classification of the articles that use the data from the \gls{SDSS}}\label{tab:sdss_queries_count}
\end{table}

To better understand how this dataset is used, I processed the results from query~\ref{sql:get_queries}
and extracted the columns, relations, and filters.
Table~\ref{tab:most_tables} shows the most frequent queried combinations.

\begin{table}[htbp]
\centering
\begin{tabular}{l r r}
    \textbf{Tables} & \textbf{Count} & \textbf{Percentage} \\ \hline
    fGetNearbyObjEq, PhotoPrimary          &  264785 &  37.62\% \\
    DBObjects\textasteriskcentered         &  150458 &  21.37\% \\
    PhotoTag, fGetObjFromRectEq            &   93094 &  13.23\% \\
    IndexMap\textasteriskcentered          &   41265 &   5.86\% \\
    Galaxy, fGetNearbyObjEq                &   31130 &   4.42\% \\
    sppParams, PhotoTag, fGetObjFromRectEq &   29805 &   4.23\% \\
\end{tabular}
\caption[Most frequently queried relations from the \gls{SDSS}]{
    Combination of relations most frequently queried. Tables marked with (\textasteriskcentered)
    are meta-data tables (i.e., describe the schema)
}\label{tab:most_tables}
\end{table}

Interestingly, introspection queries are widespread, indicating that users spend considerable time
familiarizing themselves with the schema. This result is consistent with the observation from an IBM
study that finds that even data architects can spend up to 70\% of their time just discovering the
metadata of databases~\cite{Wu2008}, and considering the complexity of the SDSS schema~\cite{Khoussainova2010}.

\section{Defining objectives}
\label{sec:objectives}

\paragraph{Support for data distributed across multiple files} is generally neglected by
\textit{in-situ} data exploration solutions~\cite{Silva2016}. However, indexing, storage,
and interactivity are well covered, as seen in chapter~\ref{chapter:literature_review}.

\paragraph{Exploring the database schema} itself, at least judging from the \gls{SDSS} data,
is non-negligible user activity. Indexing is hardly helpful if the users do not know what to query.

\paragraph{The question that arises is:} can we help users to navigate \textit{in-situ} datasets
split across multiple files, with unknown schema, facilitating relationship-based mining?
When metadata is present, we could rely on name matching, but when it is not, or is misaligned?

\textsc{ReDiscover}~\cite{alawini2016} is an example of a proposed solution for this problem.
It uses machine learning techniques, such as Support Vector Machines, to identify matching
columns between scientific tabular data.
Yet, this system focuses mainly on the correspondence between \emph{individual columns},
which is insufficient for spatial and coincidence associations, as they are multidimensional.
We are left only with a set of pairwise correspondences that may not be enough to cross-match
tuples between files.

In chapter~\ref{chapter:presq} we propose a novel algorithm, \PresQ, that can recover
multidimensional correspondences between datasets with different, undocumented --- or unknown --- schema.

\PresQ relies on statistical tests to accept or discard these correspondences.
To complement this method, chapter~\ref{chapter:som} describes a multidimensional
statistical test based on \gls{SOM} that offers additional interpretability. It can be used
with \PresQ for studying with more details accepted or rejected correspondences;
or afterward over the merged dataset for clustering or as a pre-processing for nearest-neighbor
coincidence search~\cite{silva2011som}.


\todo{Actualizar con el informe 2019 el cap√≠tulo 2}

\section{Initial prototypes}
\todo{Corresponds to preliminary layouts, select best layouts}

\todo{Preliminary Layout}
